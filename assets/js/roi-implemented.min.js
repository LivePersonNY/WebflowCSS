function setProgress(e,a,t,r){var l=document.querySelector(a),s=document.querySelector(a+"-val"),c=document.querySelector(a+"-cap"),o=2*l.r.baseVal.value*Math.PI;l.style.strokeDasharray=`${o} ${o}`,l.style.strokeDashoffset=`${o}`;const n=o-e/100*o;s.innerHTML=t||numberShort(e),c.innerHTML=r||"Savings",l.style.strokeDashoffset=n}function numberShort(e,a){return e<1e3?numberShortFormat(e,""):e<1e6?numberShortFormat((e/1e3).toFixed(a),"K"):e<1e7?numberShortFormat((e/1e6).toFixed(a),"M"):e<1e9?numberShortFormat((e/1e6).toFixed(a),"M"):e<1e10?numberShortFormat((e/1e9).toFixed(a),"B"):e<1e12?numberShortFormat((e/1e9).toFixed(a),"B"):numberShortFormat(e,"")}function numberShortFormat(e,a){return e.toString().replace(/^0\./,".")+a}function locNumber(e,a,t,r,l){return"integer"==a?e.toLocaleString():e.toLocaleString(void 0,{style:a||"currency",currency:t||"USD",minimumFractionDigits:r||2,maximumFractionDigits:l||2})}function updateTableCells(e,a,t,r,l,s){["baseline","year1","year2","year3"].forEach(function(c){var o=a[c];r&&(o=a[c][r]),void 0==l&&(l="percent"==t?1:2),$(e+"-"+c).text(locNumber(o,t,void 0,l,s))})}$(".jqslider-styles").each(function(){var e=$(this).data("min"),a=$(this).data("max"),t=$(this).data("step"),r=$(this).data("value").toLocaleString();$(this).slider({range:"min",min:parseFloat(e),max:parseFloat(a),step:parseFloat(t),value:parseFloat(r),slide:function(e,a){var t="",r="";switch($("#"+$(this).attr("id")+"-value").data("symbol")){case"$":t="$";break;case"%":r="%"}$("#"+$(this).attr("id")+"-value").val(t+a.value.toLocaleString()+r),updateChart()}})}),$(".slider-value").each(function(){var e="",a="";switch($(this).data("symbol")){case"$":e="$";break;case"%":a="%"}$(this).val(e+$("#"+$(this).data("slider-ref")).slider("value").toLocaleString()+a),$(this).on("input",function(){var t=$(this).val(),r=parseFloat(t.replace(/[^0-9-.]/g,""));$("#"+$(this).data("slider-ref")).slider("value",r),$(this).val(e+r.toLocaleString()+a),updateChart()})}),ROICalc.init({inputs:{event:"input"}});var updateChart=async function(){(new Date).getFullYear();await Promise.all([ROICalc.model.updateAll(),ROICalc.model.calculate.sales.run(),ROICalc.model.calculate.care.run(),ROICalc.model.calculate.totals.run()]);var e=0,a={element:[{name:"#two",numbers:[ROICalc.results.totals.growth.year1,ROICalc.results.totals.savings.year1,ROICalc.results.totals.growth.year2,ROICalc.results.totals.savings.year2,ROICalc.results.totals.growth.year3,ROICalc.results.totals.savings.year3],totals:[ROICalc.results.totals.total_benefit.year1,ROICalc.results.totals.total_benefit.year2,ROICalc.results.totals.total_benefit.year3]}]},t=ROICalc.results.totals.total_benefit.year1+ROICalc.results.totals.total_benefit.year2+ROICalc.results.totals.total_benefit.year3,r=ROICalc.results.sales.increase.year1+ROICalc.results.sales.increase.year2+ROICalc.results.sales.increase.year3,l=ROICalc.results.sales.average_order_value.year1+ROICalc.results.sales.average_order_value.year2+ROICalc.results.sales.average_order_value.year3,s=ROICalc.results.care.fcr.year1+ROICalc.results.care.fcr.year2+ROICalc.results.care.fcr.year3,c=ROICalc.results.care.efficiency.year1+ROICalc.results.care.efficiency.year2+ROICalc.results.care.efficiency.year3,o=ROICalc.results.care.ai_scale.year1+ROICalc.results.care.ai_scale.year2+ROICalc.results.care.ai_scale.year3;setProgress((r/t*100).toFixed(),"#circle1",numberShort(r),"Growth"),setProgress((l/r*100).toFixed(),"#circle2",numberShort(l),"Growth"),setProgress((s/t*100).toFixed(),"#circle3",numberShort(s),"Growth"),setProgress((o/t*100).toFixed(),"#circle4",numberShort(o),"Savings"),setProgress((c/t*100).toFixed(),"#circle5",numberShort(c),"Savings"),$("#text_total_benefit").text("$"+numberShort(t)),$("#text_year1").text("$"+numberShort(ROICalc.results.totals.total_benefit.year1)),$("#text_year2").text("$"+numberShort(ROICalc.results.totals.total_benefit.year2)),$("#text_year3").text("$"+numberShort(ROICalc.results.totals.total_benefit.year3)),$("#text-incr").text("$"+numberShort(r)),$("#text-ai-savings").text("$"+numberShort(o)),$("#text-efficiency").text("$"+numberShort(c)),$("#cost-per-convo-phone").text("$"+numberShort(ROICalc.model.inputs["care-cost-per-call"].toFixed())),$("#cost-per-convo-mess").text("$"+numberShort((ROICalc.model.inputs["care-cost-per-call"]/ROICalc.model.calculate.care.increments.year3.eff_ratio).toFixed()));var n=ROICalc.model.inputs["sales-conv-rate"]/100;updateTableCells("#rev",ROICalc.results.sales.increase,"currency",void 0,"0","0"),$(".annual_traffic").text(ROICalc.model.inputs["sales-traffic"].toLocaleString()),$(".conv_rate").text(ROICalc.model.inputs["sales-conv-rate"].toLocaleString());var i=ROICalc.model.inputs["sales-traffic"]*n;$(".digi_orders").text(i.toLocaleString());var u=ROICalc.model.inputs["sales-traffic"]-i;$(".remaining_traffic").text(u.toLocaleString()),updateTableCells("#acr",ROICalc.model.calculate.sales.increments,"percent","acc_rate"),updateTableCells("#tmc",{baseline:0,year1:u*ROICalc.model.calculate.sales.increments.year1.acc_rate,year2:u*ROICalc.model.calculate.sales.increments.year2.acc_rate,year3:u*ROICalc.model.calculate.sales.increments.year3.acc_rate},"integer"),updateTableCells("#scr",{baseline:n,year1:n*ROICalc.model.calculate.sales.increments.year1.conv_rate_m,year2:n*ROICalc.model.calculate.sales.increments.year2.conv_rate_m,year3:n*ROICalc.model.calculate.sales.increments.year3.conv_rate_m},"percent"),updateTableCells("#mas",ROICalc.results.sales.raw,"currency","mess_assisted_sales"),updateTableCells("#avg",ROICalc.results.sales.raw,"currency","avg_order_value"),updateTableCells("#total_convos",ROICalc.results.sales.raw,"integer","total_convos"),updateTableCells("#shift",ROICalc.model.calculate.care.increments,"percent","shift_rate"),updateTableCells("#convos_shifted",ROICalc.results.care.raw,"integer","conversations_shifted"),updateTableCells("#fcr-perc",ROICalc.results.care.raw,"percent","messaging_fcr"),updateTableCells("#repeat",ROICalc.results.care.raw,"integer","repeat_conversations"),updateTableCells("#rem-mess",ROICalc.results.care.raw,"integer","remaining_conversations"),updateTableCells("#bot-rate",ROICalc.model.calculate.care.increments,"percent","bcr_rate"),updateTableCells("#bot",ROICalc.results.care.raw,"integer","bot_contained_conversations"),updateTableCells("#agent",ROICalc.results.care.raw,"integer","remaining_agent_conversations"),updateTableCells("#cost",ROICalc.results.care.raw,"currency","agent_cost_at_baseline"),updateTableCells("#cost",{baseline:ROICalc.model.inputs["care-cost-per-call"],year1:ROICalc.model.inputs["care-cost-per-call"],year2:ROICalc.model.inputs["care-cost-per-call"],year3:ROICalc.model.inputs["care-cost-per-call"]},"currency"),updateTableCells("#mess-eff",ROICalc.model.calculate.care.increments,"decimal","eff_ratio"),updateTableCells("#cost-convo",ROICalc.results.care.raw,"currency","cost_per_messaging_conversation"),updateTableCells("#inc",ROICalc.results.sales.average_order_value,"currency",void 0,"0","0"),updateTableCells("#fcr",ROICalc.results.care.fcr,"currency",void 0,"0","0"),updateTableCells("#mess",ROICalc.results.care.ai_scale,"currency",void 0,"0","0"),updateTableCells("#eff",ROICalc.results.care.efficiency,"currency",void 0,"0","0"),$("#totals-year1").text("$"+numberShort(ROICalc.results.totals.total_benefit.year1)),$("#totals-year2").text("$"+numberShort(ROICalc.results.totals.total_benefit.year2)),$("#totals-year3").text("$"+numberShort(ROICalc.results.totals.total_benefit.year3)),setTimeout(function(){$("#two .bar").each(function(e){(a.element[0].numbers[e]/1e6).toFixed(2);var t=0,r=.33;e>1&&e<4?(t=1,r=.66):e>3&&(t=2,r=1);var l=a.element[0].numbers[e]/a.element[0].totals[t]*100*r;$(this).css({height:l+"%"}),$(this).find(".tooltip").text("$"+numberShort(a.element[0].numbers[e],2))}),$("#two .total-year-benefit").each(function(t){e+=a.element[0].totals[t],$(this).text("$"+numberShort(a.element[0].totals[t],2)),$("#two .estimated-total-benefit").text("$"+numberShort(e,2))})},500)};function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}$(".industry-select").change(function(){var e=$(this).find(":selected").data("sales-conv-rate"),a=$(this).find(":selected").data("sales-avg-order"),t=$(this).find(":selected").data("care-cost-per-call"),r=$(this).find(":selected").data("care-contact-resolution");$("#slider2-value").val(e),$("#slider2").slider("value",e),$("#slider3-value").val(a),$("#slider3").slider("value",a),$("#slider5-value").val(t),$("#slider5").slider("value",t),$("#slider6-value").val(r),$("#slider6").slider("value",r),ROICalc.init(),updateChart()}),updateChart();